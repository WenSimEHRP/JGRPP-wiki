# 寻路限制

在这里我将介绍一些寻路限制在游戏中的运用实例。[^rspp]
部分例子在预防冲突与节省基建时几乎是唯一解决方案。
对寻路限制与寻路限制程序的合理运用可以很大程度上提升运行的顺滑度，
同时也降低阻塞的风险。虽然单一程序可能耗不起眼，但程序积少成多，
最终你的网络会让在其上运行的列车快速且准确。

[^rspp]: 译注：寻路限制（Routefinding restriction）和可编程逻辑信号（Programmable pre-signal）是两个极其容易混淆的概念。
寻路限制仅适用于路径信号，可编程逻辑信号只适用于可编程逻辑信号（橙色灯牌）
两者之间的差异在于可编程逻辑信号本质上来说还是逻辑信号（通过、进出口、复合），
所以不需要预留一段路径。
而寻路限制本质上是给路径信号路径预留增加了限制，需要预留路径。
详细解释参见“[信号](../Features/Signalling.md)”章节。

## 如何配置

首先要介绍的就是分区功能当中的一个选项。
你可以在分区选项中设置高亮寻路限制信号，这样就可以快速找到你特别设置过的信号灯。[^remove_signal]
防止你误操作删除你设置过的信号。

[^remove_signal]: 译注：实际上如果完全使用 8bpp 图像，且信号灯的灯杆是灰色或蓝灰色，在开启“寻路限制信号使用蓝色灯柱”时，
游戏会自动将这些信号的灯柱替换为蓝色，所以可以不使用文中所述分区功能。不过，“启用蓝色灯柱”不适用于这些情形：
灯柱不是蓝色的，或图像不是 8bpp 的（即图像为 32bpp）。

为了给信号灯编制寻路限制程序，你需要点选信号灯菜单中的齿轮图标。
点选后，点击你所需编程的信号。

这就是寻路限制菜单了。

## 简单信号路径优先

寻路限制信号编程的一大作用是*确定优先级*。这里是一个优先级的例子。
具体实现优先级需要这两种操作当中的一种，不过我个人认为接续预留的效果最好：

* [延续预留](../Features/Signalling.md#延续预留)（Reserve through）

  *列车预留路径不会在这个信号处结束，就好像信号在前进方向上根本不存在一样。*
  *此操作在应用于有信号的隧道/桥梁入口或出口时没有效果。*

* [接续预留](../Features/Signalling.md#接续预留)（Long reserve）

  *如果列车的预留路径在这个信号处终止，游戏会尝试从这个信号开始预留另一段路径。*
  *第一段路径和第二段路径无关。第二段路径预留失败不影响第一段路径。*
  *此操作在应用于有信号的隧道/桥梁入口或出口时没有效果。*

客运列车的优先级比货运列车高。在图中的设置下，客运列车的预留路径在到达信号灯时会触发一连串的接续预留操作，
从而保证在客运列车和货运列车同时抵达或货运列车稍早抵达的情况下，客运列车可以优先通过。

如果你想要把范围缩小一点，比如不包括在主线上运行的货运列车，你可以通过添加一个“如果”声明，
专门用于针对特定种类的列车。

比如，如果你只想让客运列车获得优先级，你可以将“如果”的条件改为“列车可以运载旅客”。

